:root{
  /* base tokens (saffron defaults) */
  --bg-0:#fff7e6;
  --bg-1:#fff1d6;

  --bg:#fff7e6; /* kept for backward compatibility */
  --card:rgba(255,255,255,.88);
  --text:#1f2937;
  --muted:#6b7280;
  --brand:#d97706;
  --brand2:#b45309;
  --border:rgba(31,41,55,.14);
  --shadow: 0 12px 30px rgba(31,41,55,.10);
  --r:18px;

  --ring: 0 0 0 4px rgba(245,158,11,.18);
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}

/* THEME-AWARE PAGE BACKGROUND */
body{
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 20% -10%, color-mix(in srgb, var(--brand) 24%, transparent), transparent 60%),
    radial-gradient(900px 500px at 90% 0%, color-mix(in srgb, var(--brand2) 18%, transparent), transparent 55%),
    linear-gradient(180deg, color-mix(in srgb, var(--bg-0) 96%, #fff), var(--bg-1));
}

.pp-container{max-width:1100px;margin:0 auto;padding:16px}

.pp-top{
  position:sticky;top:0;z-index:50;
  backdrop-filter: blur(10px);
  background:color-mix(in srgb, var(--card) 85%, transparent);
  border-bottom:1px solid var(--border);
}
.pp-top-inner{display:flex;align-items:center;justify-content:space-between;gap:12px}
.pp-brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:inherit}
.pp-logo{
  width:42px;height:42px;border-radius:999px;
  display:grid;place-items:center;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  color:#fff;font-weight:1000;
  box-shadow: var(--shadow);
}
.pp-brand-title{display:block;font-weight:1000}
.pp-brand-sub{display:block;font-size:12px;color:var(--muted);font-weight:800}

.pp-nav{display:flex;gap:10px;flex-wrap:wrap}
.pp-nav a{
  text-decoration:none;color:inherit;
  padding:10px 12px;border-radius:999px;
  border:1px solid transparent;
  font-weight:900;
}
.pp-nav a:hover{border-color:var(--border);background:color-mix(in srgb, var(--card) 70%, transparent)}

.pp-foot{margin-top:26px;border-top:1px solid var(--border);background:color-mix(in srgb, var(--card) 70%, transparent)}
.pp-foot-inner{padding:14px 16px}

.pp-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--r);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.pp-pad{padding:16px}

.pp-h1{margin:10px 0 0;font-size:28px;letter-spacing:-.02em}
.pp-h2{font-size:18px;font-weight:1000}
.pp-mini{ font-size:12px;color:var(--muted);font-weight:900}
.pp-muted{color:var(--muted);font-weight:700;line-height:1.55}

.pp-actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pp-btn{
  appearance:none;border:none;cursor:pointer;
  padding:10px 14px;border-radius:999px;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  color:#fff;font-weight:1000;
  text-decoration:none;display:inline-flex;align-items:center;gap:8px;
}
.pp-btn--ghost{
  background:color-mix(in srgb, var(--card) 70%, transparent);
  color:var(--text);
  border:1px solid var(--border);
}
.pp-btn:disabled{opacity:.5;cursor:not-allowed}
.pp-btn:focus{ outline:none; box-shadow: var(--ring); }

.pp-input{
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px 12px;
  background:color-mix(in srgb, var(--card) 78%, transparent);
  font-weight:900;
  outline:none;
  color: var(--text);
}
.pp-input:focus{ box-shadow: var(--ring); }

.pp-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:12px;
}
@media (max-width: 900px){ .pp-grid{grid-template-columns: repeat(2, minmax(0, 1fr));} }
@media (max-width: 560px){ .pp-grid{grid-template-columns: 1fr;} }

.pp-pill{
  display:inline-flex;padding:6px 10px;border-radius:999px;
  border:1px solid var(--border);
  background:color-mix(in srgb, var(--card) 65%, transparent);
  font-weight:900;font-size:12px;
}

.pp-split{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-end}

/* ==============================
   THEME SYSTEM (3 themes)
   ============================== */

html { color-scheme: light; }
html[data-theme="midnight"]{ color-scheme: dark; }

html[data-theme="saffron"]{
  --bg-0:#fff7e6;
  --bg-1:#fff1d6;
  --card:rgba(255,255,255,.90);
  --text:#1f2937;
  --muted:#6b7280;
  --border:rgba(31,41,55,.12);
  --brand:#d97706;
  --brand2:#f59e0b;
  --shadow: 0 16px 40px rgba(17,24,39,.10);
  --ring: 0 0 0 4px rgba(245,158,11,.18);
}

html[data-theme="midnight"]{
  --bg-0:#0b1220;
  --bg-1:#0f1b33;
  --card:rgba(17,24,39,.78);
  --text:#e5e7eb;
  --muted:#9ca3af;
  --border:rgba(255,255,255,.10);
  --brand:#f59e0b;
  --brand2:#fb923c;
  --shadow: 0 18px 60px rgba(0,0,0,.40);
  --ring: 0 0 0 4px rgba(245,158,11,.22);
}

html[data-theme="mint"]{
  --bg-0:#ecfdf5;
  --bg-1:#d1fae5;
  --card:rgba(255,255,255,.88);
  --text:#064e3b;
  --muted:#0f766e;
  --border:rgba(6,78,59,.14);
  --brand:#059669;
  --brand2:#10b981;
  --shadow: 0 16px 44px rgba(6,78,59,.12);
  --ring: 0 0 0 4px rgba(16,185,129,.20);
}

/* 2) Smooth Theme Transitions (after initial paint) */
@media (prefers-reduced-motion: no-preference){
  html.theme-animate, html.theme-animate *{
    transition:
      background-color .25s ease,
      color .25s ease,
      border-color .25s ease,
      box-shadow .25s ease,
      fill .25s ease,
      stroke .25s ease;
  }
}
/* =========================
   Leaflet marker circle (Route Map)
   ========================= */

/* Prevent Leaflet default div icon box */
.leaflet-div-icon{
  background: transparent !important;
  border: none !important;
}

/* Your custom marker created in route-editor.js */
.pp-marker{
  width: 18px;
  height: 18px;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,.95);
  box-shadow: 0 10px 22px rgba(0,0,0,.28);
  position: relative;
}

/* Optional: add a small “glow” ring for visibility on tiles */
.pp-marker::after{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:999px;
  background: radial-gradient(circle, color-mix(in srgb, currentColor 0%, transparent) 0%, transparent 70%);
  opacity: .0; /* keep off by default */
}

/* Make sure markers stay crisp even with global transitions */
html.theme-animate .leaflet-container *,
html.theme-animate .leaflet-container{
  transition: none !important;
}
.pp-marker{
  width:26px;height:26px;
  border-radius:999px;
  border:2px solid rgba(255,255,255,.95);
  box-shadow:0 12px 26px rgba(0,0,0,.30);
  display:grid;
  place-items:center;
}
.pp-marker__txt{
  color:#fff;
  font-weight:1000;
  font-size:12px;
  line-height:1;
  text-shadow: 0 2px 8px rgba(0,0,0,.35);
}
/* ===================================================
   AUTO-INVERT MARKERS (Inverse of page background)
   =================================================== */

/* Remove leaflet default square */
.leaflet-div-icon{
  background: transparent !important;
  border: none !important;
}

/* Core circular marker */
.pp-marker{
  width: 20px;
  height: 20px;
  border-radius: 999px;

  /* Invert entire page color under it */
  background: transparent !important;
  backdrop-filter: invert(1);
  -webkit-backdrop-filter: invert(1);

  border: 2px solid currentColor;
  box-shadow: 0 6px 18px rgba(0,0,0,.35);

  display: block;
}

/* Ensure text/icons use opposite contrast */
.pp-marker,
.pp-dot{
  color: var(--text);
}

/* If using small dot in itinerary list */
.pp-dot{
  width:12px;
  height:12px;
  border-radius:999px;
  display:inline-block;
  border:2px solid currentColor;
  backdrop-filter: invert(1);
  -webkit-backdrop-filter: invert(1);
}
